= OpenFDA Analytics

This data visualization application fetches adverse event data via the OpenFDA API (https://open.fda.gov/) and generates charts and tables according to user-defined filters. The live production site can be found here: http://openfda-production.elasticbeanstalk.com/

Some technologies used include:

* Ruby on Rails
* AngularJS
* AWS Elastic Beanstalk
* Docker
* New Relic
* Travis CI

== How to Install and Run Locally

Note. The instructions are with respect to a ubuntu 14.04 server.

Ruby version: 2.1.5

=== Development Setup

==== Setup AWS Account

- Login to the AWS Account
- Go to EC2 console.
- Create a ssh keypair
- Launch a new instance with ubuntu 14.04 ami, atleast 4 Gb of ram and above created keypair
- Login to EC2 via ssh using the keypair

==== Server Setup

- Update apt cache

    sudo apt-get update

- Install git

  sudo apt-get install git

- Install rvm

    gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3

    \curl -sSL https://get.rvm.io | bash
    
    source ~/.bashrc

    rvm install ruby-2.1.5
    
    rvm rubygems current
    
- Open a new shell and clone the Repo

    git clone <repo>

    cd <cloned repo>


==== Setup Rails app

-  Install system dependencies

    gem install bundler

    bundle install


==== Run app

    rails s -p 3000
    
    Now open port 3000 using AWS security groups. Open <server_ip>:3000 in browser.
    
=== Testing

Run the test suite

    bundle exec rake spec

=== Production Deployment instructions





Before deploying, you need to run the asset pipeline to build the static assets

    RAILS_ENV=production spring rake assets:precompile

Push the code to the master branch. Once Travis CI runs all the tests associated with the repo it will auto-deploy to Elastic Beanstalk

    git push origin master

- Continuous Integration

For viewing continuous integration status, check Travis CI at https://travis-ci.org/binarygroup/OpenFDA

* Continuous Monitoring

For error and performance monitoring, check the New Relic dashboard at https://rpm.newrelic.com/accounts/1028379/applications

For server monitoring, check the AWS Elastic Beanstalk console

* Server Configuration Management

Elastic Beanstalk provides a command line as well as web UI for managing the infrastructure configuration.

* Setup Travis CI

Its very straight forward to setup travis-ci, following are the steps

- Enable access for the repo, to the travis ci servers
- Add a `.travis.yml` file to the project root which defines all the configuation, which is read by the travis ci engine, upon every new commit message being pushed to the repo.


* Setup New Relic

New Relic provide a gem and a licence file, just add the gem to the Gemfile, run bundle install and add the licence in the config/ folder. Update the configuration as required in the licence file.







